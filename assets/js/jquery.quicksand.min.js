!function(t){t.fn.quicksand=function(e,i){var s,a={duration:750,easing:"swing",attribute:"data-id",adjustHeight:"auto",adjustWidth:"auto",useScaling:!1,enhancement:function(t){},selector:"> *",atomic:!1,dx:0,dy:0,maxWidth:0,retainExisting:!0};return t.extend(a,i),(t.browser.msie||void 0===t.fn.scale)&&(a.useScaling=!1),"function"==typeof arguments[1]?s=arguments[1]:(arguments[2],s=arguments[2]),this.each(function(i){var o,n,f=[];n="function"==typeof a.attribute?t(e):t(e).filter("["+a.attribute+"]").clone();var l,r,h=t(this),p=t(this).css("height"),c=t(this).css("width"),d=!1,u=!1,y=t(h).offset(),m=[],g=t(this).find(a.selector),b=t(g).innerWidth();if(t.browser.msie&&parseInt(t.browser.version,10)<7)h.html("").append(n);else{var v=0,w=function(){if(t(this).css("margin","").css("position","").css("top","").css("left","").css("opacity",""),!v){if(v=1,!a.atomic){var e=h.find(a.selector);if(a.retainExisting){var i=t([]);S.find(a.selector).each(function(s){var o=t([]);if("function"==typeof a.attribute){var n=a.attribute(t(this));e.each(function(){if(a.attribute(this)==n)return o=t(this),!1})}else o=e.filter("["+a.attribute+'="'+t(this).attr(a.attribute)+'"]');o.length>0&&(i=i.add(o),0===s?h.prepend(o):o.insertAfter(h.find(a.selector).get(s-1)))}),e.not(i).remove()}else h.prepend(S.find(a.selector)),e.remove();d&&h.css("height",l),u&&h.css("width",c)}a.enhancement(h),"function"==typeof s&&s.call(this)}!1===a.adjustHeight&&h.css("height","auto"),!1===a.adjustWidth&&h.css("width","auto")},x=h.offsetParent(),F=x.offset();"relative"==x.css("position")?"body"!=x.get(0).nodeName.toLowerCase()&&(F.top+=parseFloat(x.css("border-top-width"))||0,F.left+=parseFloat(x.css("border-left-width"))||0):(F.top-=parseFloat(x.css("border-top-width"))||0,F.left-=parseFloat(x.css("border-left-width"))||0,F.top-=parseFloat(x.css("margin-top"))||0,F.left-=parseFloat(x.css("margin-left"))||0),isNaN(F.left)&&(F.left=0),isNaN(F.top)&&(F.top=0),F.left-=a.dx,F.top-=a.dy,h.css("height",t(this).height()),h.css("width",t(this).width()),g.each(function(e){m[e]=t(this).offset()}),t(this).stop();var W=0,j=0;g.each(function(e){t(this).stop();var i=t(this).get(0);"absolute"==i.style.position?(W=-a.dx,j=-a.dy):(W=a.dx,j=a.dy),i.style.position="absolute",i.style.margin="0",a.adjustWidth||(i.style.width=b+"px"),i.style.top=m[e].top-parseFloat(i.style.marginTop)-F.top+j+"px",i.style.left=m[e].left-parseFloat(i.style.marginLeft)-F.left+W+"px",a.maxWidth>0&&m[e].left>a.maxWidth&&(i.style.display="none")});var S=t(h).clone(),H=S.get(0);if(H.innerHTML="",H.setAttribute("id",""),H.style.height="auto",H.style.width=h.width()+"px",S.append(n),S.insertBefore(h),S.css("opacity",0),H.style.zIndex=-1,H.style.margin="0",H.style.position="absolute",H.style.top=y.top-F.top+"px",H.style.left=y.left-F.left+"px","dynamic"===a.adjustHeight?h.animate({height:S.height()},a.duration,a.easing):"auto"===a.adjustHeight&&(l=S.height(),parseFloat(p)<parseFloat(l)?h.css("height",l):d=!0),"dynamic"===a.adjustWidth?h.animate({width:S.width()},a.duration,a.easing):"auto"===a.adjustWidth&&(r=S.width(),parseFloat(c)<parseFloat(r)?h.css("width",r):u=!0),g.each(function(e){var i=[];"function"==typeof a.attribute?(o=a.attribute(t(this)),n.each(function(){if(a.attribute(this)==o)return i=t(this),!1})):i=n.filter("["+a.attribute+'="'+t(this).attr(a.attribute)+'"]'),i.length?a.useScaling?f.push({element:t(this),dest:i,style:{top:t(this).offset().top,left:t(this).offset().left,opacity:""},animation:{top:i.offset().top-F.top,left:i.offset().left-F.left,opacity:1,scale:"1.0"}}):f.push({element:t(this),dest:i,style:{top:t(this).offset().top,left:t(this).offset().left,opacity:""},animation:{top:i.offset().top-F.top,left:i.offset().left-F.left,opacity:1}}):a.useScaling?f.push({element:t(this),animation:{opacity:"0.0",style:{top:t(this).offset().top,left:t(this).offset().left,opacity:""},scale:"0.0"}}):f.push({element:t(this),style:{top:t(this).offset().top,left:t(this).offset().left,opacity:""},animation:{opacity:"0.0"}})}),n.each(function(e){var i,s=[],l=[];if("function"==typeof a.attribute?(o=a.attribute(t(this)),g.each(function(){if(a.attribute(this)==o)return s=t(this),!1}),n.each(function(){if(a.attribute(this)==o)return l=t(this),!1})):(s=g.filter("["+a.attribute+'="'+t(this).attr(a.attribute)+'"]'),l=n.filter("["+a.attribute+'="'+t(this).attr(a.attribute)+'"]')),0===s.length&&l.length>0){i=a.useScaling?{opacity:"1.0",scale:"1.0"}:{opacity:"1.0"};var r=l.clone(),p=r.get(0);p.style.position="absolute",p.style.margin="0",a.adjustWidth||(p.style.width=b+"px"),p.style.top=l.offset().top-F.top+"px",p.style.left=l.offset().left-F.left+"px",r.css("opacity",0),a.useScaling&&r.css("transform","scale(0.0)"),r.appendTo(h),(0===a.maxWidth||l.offset().left<a.maxWidth)&&f.push({element:t(r),dest:l,animation:i})}}),S.remove(),a.atomic){for($toDelete=h.find(a.selector),h.prepend(S.find(a.selector)),i=0;i<f.length;i++)if(f[i].dest&&f[i].style){var N=f[i].dest,L=N.offset();N.css({position:"relative",top:f[i].style.top-L.top,left:f[i].style.left-L.left}),N.animate({top:"0",left:"0"},a.duration,a.easing,w)}else f[i].element.animate(f[i].animation,a.duration,a.easing,w);$toDelete.remove()}else for(a.enhancement(h),i=0;i<f.length;i++)f[i].element.animate(f[i].animation,a.duration,a.easing,w)}})}}(jQuery);